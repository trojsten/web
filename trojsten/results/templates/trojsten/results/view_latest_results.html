{% extends "trojsten/layout/main.html" %}
{% load results_parts %}
{% load utils %}

{% block title %}Aktuálne výsledky{% endblock %}

{% block page_header %}
<h1>Aktuálne výsledky</h1>
{% endblock %}

{% block page_content %}
{% for round, info in rounds_info.items %}
    <h2>{{round.series.competition}} <small>{{round}}</small></h2>
    {% if info.categories|length > 1 %}
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            {% for category in info.categories %}
                {% if category != None %}
                    <li {% if forloop.counter == 2 %}class="active"{%endif%}><a href="#category-tab-{{category}}" role="tab" data-toggle="tab">{{category}}</a></li>
                {% endif %}
            {% endfor %}
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            {% for category in info.categories %}
                {% if category != None %}
                    <div class="tab-pane fade{% if forloop.counter == 2 %} in active{%endif%}" id="category-tab-{{category}}">
                        {% is_final rounds=info.all_rounds categories=category|as_list as final_results %}
                        {% if not final_results %}<div class="alert alert-warning">Výsledky sú predbežné.</div>{% endif %}
                        {% show_results_table rounds=info.all_rounds categories=category|as_list %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        {% show_results_table rounds=info.all_rounds %}
    {% endif %}

{% endfor %}
{% endblock %}
